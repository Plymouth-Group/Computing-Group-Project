<!-- Create Administrator account for the Server Page
	--
	-- Developed by Piyumi Prasandika
	-->

{{template "head.tmpl" .}}

<body>

	<div class="section-non-logged">
		<div class="form">
			<div class="title">Create Administrator Account for Server <span class="bold">{{.Server_name}}</span></div>

			<div class="grid grid-center item-center">
				<div class="column-4">
					<div class="box">
						<form method="POST" action="/create_admin" enctype="application/x-www-form-urlencoded">
							<div class="grid">
								<div class="column-6">
									<div class="label">Email Address</div>
								</div>
								<div class="column-6">
									<div class="label"><span class="right error"></span></div>
								</div>
							</div>

							<input name="admin_email" type="email" placeholder="">

							<div class="grid">
								<div class="column-6">
									<div class="label">Password</div>
								</div>
								<div class="column-6">
									<div class="label"><span id="error-psw" class="right error"></span></div>
								</div>
							</div>

							<input id="admin_password" name="admin_password" type="password" placeholder="" autocomplete="off"
								onkeydown="check_psw()" minlength="4">

							<div class="grid">
								<div class="column-6">
									<div class="label">Confirm Password</div>
								</div>
								<div class="column-6">
									<div class="label"><span id="error-conf-psw" class="right error"></span></div>
								</div>
							</div>

							<input id="input_cnfpsw" name="input_cnfpsw" type="password" placeholder="" autocomplete="off"
								onkeydown="check_conf_psw()">

							<div class="grid grid-end">
								<button id="submit-btn" type="submit">Create Server</button>
							</div>

							<div class="line"></div>

							<div class="link">Already have a Server? <a href="/account_select">Sign In</a></div>
						</form>
					</div>
				</div>
			</div>
		</div>

		{{template "footer_form.tmpl" .}}
	</div>

	<script>
		document.getElementById("submit-btn").disabled = true;

		function check_psw() {
			var psw = document.getElementById("admin_password").value;

			if (psw == "") {
				document.getElementById("error-psw").innerHTML = "Invalid Password";
			}

			if (psw.length <= 2) {
				document.getElementById("error-psw").innerHTML = "Minimum 4 characters needed";
			} else {
				document.getElementById("error-psw").innerHTML = "";
			}
		}

		function check_conf_psw() {
			var psw = document.getElementById("admin_password").value;
			var psw_conf = document.getElementById("input_cnfpsw").value;

			if (psw != psw_conf) {
				document.getElementById("error-conf-psw").innerHTML = "Password Doesn't Match";
				document.getElementById("submit-btn").disabled = true;
			} else {
				document.getElementById("error-conf-psw").innerHTML = "";
				document.getElementById("submit-btn").disabled = false;
			}
		}
	</script>

	{{template "bottom.tmpl" .}}